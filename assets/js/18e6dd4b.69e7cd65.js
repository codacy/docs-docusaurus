"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[8003],{28453(e,n,s){s.d(n,{R:()=>o,x:()=>r});var t=s(96540);const i={},a=t.createContext(i);function o(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}},90920(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"codacy-api/using-the-codacy-api","title":"Using the Codacy API","description":"The Codacy API allows you to programmatically retrieve and analyze data from Codacy and perform a few configuration changes.","source":"@site/docs/codacy-api/using-the-codacy-api.mdx","sourceDirName":"codacy-api","slug":"/codacy-api/using-the-codacy-api","permalink":"/docs-docusaurus/docs/codacy-api/using-the-codacy-api","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Using the Codacy API"},"sidebar":"documentationSidebar","previous":{"title":"User session management","permalink":"/docs-docusaurus/docs/account/user-session-management"},"next":{"title":"API tokens","permalink":"/docs-docusaurus/docs/codacy-api/api-tokens"}}');var i=s(74848),a=s(28453);const o={title:"Using the Codacy API"},r=void 0,c={},d=[{value:"Authenticating requests",id:"authenticating-requests",level:2},{value:"Using parameters in requests",id:"using-parameters-in-requests",level:2},{value:"Using pagination",id:"using-pagination",level:2},{value:"Request rate limit",id:"request-rate-limit",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"The Codacy API allows you to programmatically retrieve and analyze data from Codacy and perform a few configuration changes."}),"\n",(0,i.jsx)(n.p,{children:"Codacy supports two API versions but we strongly recommend using the new API v3 when possible since it's the version being actively developed. Import the OpenAPI 2.0 definition provided below into your development tools to help bootstrap your integration with Codacy."}),"\n",(0,i.jsxs)("table",{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{}),(0,i.jsx)("th",{children:(0,i.jsx)("strong",{children:"API v3 (recommended)"})}),(0,i.jsx)("th",{children:(0,i.jsx)("strong",{children:"API v2"})})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Endpoint documentation"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://api.codacy.com/api/api-docs",class:"skip-vale",children:(0,i.jsx)(n.a,{href:"https://api.codacy.com/api/api-docs",children:"https://api.codacy.com/api/api-docs"})})}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://api.codacy.com/api-docs",class:"skip-vale",children:(0,i.jsx)(n.a,{href:"https://api.codacy.com/api-docs",children:"https://api.codacy.com/api-docs"})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"OpenAPI 2.0 definition"}),(0,i.jsx)("td",{children:(0,i.jsx)("a",{href:"https://api.codacy.com/api/api-docs/swagger.yaml",class:"skip-vale",children:(0,i.jsx)(n.a,{href:"https://api.codacy.com/api/api-docs/swagger.yaml",children:"https://api.codacy.com/api/api-docs/swagger.yaml"})})}),(0,i.jsx)("td",{children:"-"})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Base URL"}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:(0,i.jsx)(n.a,{href:"https://api.codacy.com/api/v3",children:"https://api.codacy.com/api/v3"})})}),(0,i.jsx)("td",{children:(0,i.jsx)("code",{children:(0,i.jsx)(n.a,{href:"https://api.codacy.com/",children:"https://api.codacy.com/"})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Overview"}),(0,i.jsxs)("td",{children:[(0,i.jsx)("p",{children:"Use the new endpoints to access and manipulate the following resources, among others:"}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"https://api.codacy.com/api/api-docs#codacy-api-analysis",children:"Analysis"})," details, issue and ignored issue details, repository quality settings"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"https://api.codacy.com/api/api-docs#codacy-api-account",children:"Account"})," details and API token management"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"https://api.codacy.com/api/api-docs#codacy-api-organization",children:"Organization"})," details and join request management"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"https://api.codacy.com/api/api-docs#codacy-api-people",children:"People"})," management"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"https://api.codacy.com/api/api-docs#codacy-api-repository",children:"Repository"})," management and file details"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"https://api.codacy.com/api/api-docs#codacy-api-tools",children:"Tool"})," and code pattern details"]})]})]}),(0,i.jsxs)("td",{children:[(0,i.jsx)("p",{children:"Use the legacy endpoints to access and manipulate the following resources:"}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"https://api.codacy.com/swagger#codacy-api-commit",children:"Commit"})," code quality details and deltas"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("a",{href:"https://api.codacy.com/swagger#codacy-api-project",children:"Project"})," details and configurations, file code quality and issue details"]})]})]})]})]})]}),"\n",(0,i.jsxs)(n.admonition,{type:"important",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"If you're using Codacy Self-hosted"})," you must use your own Codacy instance domain name in the API URLs to access the endpoint documentation matching your Codacy Self-hosted version and to call the endpoints on your Codacy instance."]}),(0,i.jsx)(n.p,{children:"For example, use the following URLs for the API v3 endpoint documentation and endpoints:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"https://<your Codacy instance domain name>/api/api-docs\nhttps://<your Codacy instance domain name>/api/v3\n"})})]}),"\n",(0,i.jsx)(n.h2,{id:"authenticating-requests",children:"Authenticating requests"}),"\n",(0,i.jsxs)(n.p,{children:["Most API endpoints require that you authenticate using an API token. After ",(0,i.jsx)(n.a,{href:"api-tokens.md",children:"obtaining the necessary tokens"}),", include them in your request headers using the format ",(0,i.jsx)(n.code,{children:"api-token: <your account API token>"})," or ",(0,i.jsx)(n.code,{children:"project-token: <your repository API token>"}),"."]}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["Currently, all API v3 endpoints that require authentication must use ",(0,i.jsx)(n.strong,{children:"account API tokens"}),", while the API v2 endpoints require either ",(0,i.jsx)(n.strong,{children:"account or repository API tokens"}),"."]}),(0,i.jsxs)(n.p,{children:["Performing ",(0,i.jsx)(n.code,{children:"GET"})," requests for public repositories doesn't require authentication."]})]}),"\n",(0,i.jsx)(n.p,{children:"For example, to make a request to an API v3 endpoint that requires an account API token:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'https://api.codacy.com/api/v3/user/organizations/gh' \\\n     -H 'api-token: <your account API token>'\n"})}),"\n",(0,i.jsx)(n.p,{children:"Or to make a request to an API v2 endpoint that requires a repository API token:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'https://api.codacy.com/2.0/commit/da275c14ffab6e402dcc6009828067ffa44b7ee0' \\\n     -H 'project-token: <your repository API token>'\n"})}),"\n",(0,i.jsx)(n.h2,{id:"using-parameters-in-requests",children:"Using parameters in requests"}),"\n",(0,i.jsx)(n.p,{children:"Most API endpoints require that you specify parameters."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["For ",(0,i.jsx)(n.code,{children:"GET"})," requests"]}),", specify parameters directly as path segments of the endpoint URLs. Some endpoints also accept optional query string parameters."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, to call the endpoint ",(0,i.jsx)(n.a,{href:"https://api.codacy.com/api/api-docs#getrepositorywithanalysis",children:"getRepositoryWithAnalysis"})," with the parameters:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["provider: ",(0,i.jsx)(n.code,{children:"gh"})]}),"\n",(0,i.jsxs)(n.li,{children:["remoteOrganizationName: ",(0,i.jsx)(n.code,{children:"codacy"})]}),"\n",(0,i.jsxs)(n.li,{children:["repositoryName: ",(0,i.jsx)(n.code,{children:"docs"})]}),"\n",(0,i.jsxs)(n.li,{children:["branch (query string): ",(0,i.jsx)(n.code,{children:"api-overview"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'https://app.codacy.com/api/v3/analysis/organizations/gh/codacy/repositories/docs?branch=api-overview' \\\n     -H 'api-token: <your account API token>'\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["For ",(0,i.jsx)(n.code,{children:"POST"}),", ",(0,i.jsx)(n.code,{children:"PATCH"}),", and ",(0,i.jsx)(n.code,{children:"DELETE"})," requests"]}),", besides the parameters included in the URL you may also need to include a JSON body."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, to call the endpoint ",(0,i.jsx)(n.a,{href:"https://api.codacy.com/api/api-docs#searchrepositoryissues",children:"searchRepositoryIssues"})," specifying the issue levels ",(0,i.jsx)(n.code,{children:"Error"})," and ",(0,i.jsx)(n.code,{children:"Warning"})," in the body:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X POST 'https://app.codacy.com/api/v3/analysis/organizations/gh/codacy/repositories/docs/issues/search' \\\n     -H 'api-token: <your account API token>' \\\n     -H 'Content-Type: application/json' \\\n     -d '{\"levels\": [\"Error\", \"Warning\"]}'\n"})}),"\n",(0,i.jsx)(n.h2,{id:"using-pagination",children:"Using pagination"}),"\n",(0,i.jsx)(n.p,{children:"Endpoints that return lists containing a potential large number of results use cursor-based pagination to return the results in small batches."}),"\n",(0,i.jsxs)(n.p,{children:["These endpoints return the results together with a ",(0,i.jsx)(n.code,{children:"pagination"})," object:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If the ",(0,i.jsx)(n.code,{children:"pagination"})," object ",(0,i.jsx)(n.strong,{children:"includes"})," a ",(0,i.jsx)(n.code,{children:"cursor"}),", obtain the next page of results by calling the endpoint again using the ",(0,i.jsx)(n.code,{children:"cursor"})," from the previous response as a query string parameter"]}),"\n",(0,i.jsxs)(n.p,{children:["If the ",(0,i.jsx)(n.code,{children:"pagination"})," object ",(0,i.jsx)(n.strong,{children:"doesn't include"})," a ",(0,i.jsx)(n.code,{children:"cursor"}),", the endpoint returned the last page of results"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use the query string parameter ",(0,i.jsx)(n.code,{children:"limit"})," to configure the number of results that the endpoint returns in each page. The maximum ",(0,i.jsx)(n.code,{children:"limit"})," is 1000 and the default is 100"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"total"})," is the total number of results that the endpoint can return"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"To make sure that you receive all results when calling an endpoint with pagination, repeat the process above until the response doesn't include the cursor to obtain another page of results."})}),"\n",(0,i.jsx)(n.p,{children:"For example, the following command requests the first 10 repositories in the Codacy GitHub organization:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'https://app.codacy.com/api/v3/organizations/gh/codacy/repositories?limit=10'\n     -H 'api-token: <your account API token>'\n"})}),"\n",(0,i.jsx)(n.p,{children:"The response includes the first 10 results, as well as the cursor to obtain the next page of results:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    ...\n  ],\n  "pagination": {\n      "cursor": "codacy_2",\n      "limit": 10,\n      "total": 156\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["To obtain the next page of results, it's necessary to include the ",(0,i.jsx)(n.code,{children:"cursor"})," from the previous page as a parameter:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X GET 'https://app.codacy.com/api/v3/organizations/gh/codacy/repositories?limit=10&cursor=codacy_2'\n     -H 'api-token: <your account API token>'\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you continue requesting more pages the endpoint will eventually return a ",(0,i.jsx)(n.code,{children:"pagination"})," object that doesn't include a ",(0,i.jsx)(n.code,{children:"cursor"}),". This means that you've reached the last page of results:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "data": [\n    ...\n  ],\n  "pagination": {\n      "limit": 10,\n      "total": 156\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"request-rate-limit",children:"Request rate limit"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"On Codacy Cloud"})," the number of requests that you can perform to the Codacy API is rate limited to help us provide a reliable service:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The limit is ",(0,i.jsx)(n.strong,{children:"2500 requests per 5 minutes and per source IP address"})]}),"\n",(0,i.jsx)(n.li,{children:"When a request is rate limited, Codacy responds with an HTTP 503 or 504 error code and you should wait before attempting the request again"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Although it's possible for you to perform short bursts of requests to the Codacy API, you should always use a delay between requests to ensure that your API client doesn't hit the rate limits."}),"\n",(0,i.jsx)(n.p,{children:"The request rate limit doesn't apply to Codacy Self-hosted."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);