"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[5850],{28453(e,o,r){r.d(o,{R:()=>i,x:()=>s});var n=r(96540);const a={},t=n.createContext(a);function i(e){const o=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(t.Provider,{value:o},e.children)}},82293(e,o,r){r.r(o),r.d(o,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"coverage-reporter/troubleshooting-coverage-cli-issues","title":"Troubleshooting coverage CLI issues","description":"Instructions or workarounds to overcome common issues while using Codacy Coverage Reporter CLI.","source":"@site/docs/coverage-reporter/troubleshooting-coverage-cli-issues.md","sourceDirName":"coverage-reporter","slug":"/coverage-reporter/troubleshooting-coverage-cli-issues","permalink":"/docs-docusaurus/coverage-reporter/troubleshooting-coverage-cli-issues","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Troubleshooting coverage CLI issues","description":"Instructions or workarounds to overcome common issues while using Codacy Coverage Reporter CLI."},"sidebar":"documentationSidebar","previous":{"title":"Uploading coverage in advanced scenarios","permalink":"/docs-docusaurus/coverage-reporter/uploading-coverage-in-advanced-scenarios"},"next":{"title":"Client-side tools","permalink":"/docs-docusaurus/repositories-configure/local-analysis/client-side-tools"}}');var a=r(74848),t=r(28453);const i={title:"Troubleshooting coverage CLI issues",description:"Instructions or workarounds to overcome common issues while using Codacy Coverage Reporter CLI."},s=void 0,c={},l=[{value:"Can&#39;t guess any report due to no matching",id:"cant-guess-any-report-due-to-no-matching",level:2},{value:"Can&#39;t validate checksum",id:"checksum",level:2},{value:"Commit SHA-1 hash detection",id:"commit-detection",level:2},{value:"Connect timed out while uploading coverage data",id:"connect-timed-out-while-uploading-coverage-data",level:2},{value:"coverage-xml/index.xml generated an empty result",id:"coverage-xmlindexxml-generated-an-empty-result",level:2},{value:"JsonParseException while uploading coverage data",id:"jsonparseexception-while-uploading-coverage-data",level:2},{value:"MalformedInputException while parsing report",id:"malformedinputexception-while-parsing-report",level:2},{value:"No coverage data was sent",id:"no-coverage-data-was-sent",level:2},{value:"Report generated an empty result while uploading C# coverage data",id:"detailedxml",level:2},{value:"SubstrateSegfaultHandler caught signal 11",id:"substratesegfaulthandler-caught-signal-11",level:2},{value:"I received the message: &quot;Invalid configuration: Either a project or account API token must be provided or available in an environment variable&quot; in a build from a commit created by Dependabot (Github)",id:"i-received-the-message-invalid-configuration-either-a-project-or-account-api-token-must-be-provided-or-available-in-an-environment-variable-in-a-build-from-a-commit-created-by-dependabot-github",level:2}];function d(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.p,{children:"The sections below provide instructions or workarounds to overcome common issues while using Codacy Coverage Reporter CLI:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#cant-guess-any-report-due-to-no-matching",children:"Can't guess any report due to no matching"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#checksum",children:"Can't validate checksum"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#commit-detection",children:"Commit SHA-1 hash detection"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#connect-timed-out-while-uploading-coverage-data",children:"Connect timed out while uploading coverage data"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#coverage-xmlindexxml-generated-an-empty-result",children:"coverage-xml/index.xml generated an empty result"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#jsonparseexception-while-uploading-coverage-data",children:"JsonParseException while uploading coverage data"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#malformedinputexception-while-parsing-report",children:"MalformedInputException while parsing report"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#no-coverage-data-was-sent",children:"No coverage data was sent"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#detailedxml",children:"Report generated an empty result while uploading C# coverage data"})}),"\n",(0,a.jsx)(o.li,{children:(0,a.jsx)(o.a,{href:"#substratesegfaulthandler-caught-signal-11",children:"SubstrateSegfaultHandler caught signal 11"})}),"\n"]}),"\n",(0,a.jsx)(o.h2,{id:"cant-guess-any-report-due-to-no-matching",children:"Can't guess any report due to no matching"}),"\n",(0,a.jsxs)(o.p,{children:["Codacy Coverage Reporter automatically searches for coverage reports matching the ",(0,a.jsx)(o.a,{href:"/docs-docusaurus/coverage-reporter/#generating-coverage",children:"file name conventions for supported formats"}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["However, if Codacy Coverage Reporter doesn't find your coverage report, you can explicitly define the report file name with the flag ",(0,a.jsx)(o.code,{children:"-r"}),". For example:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"bash <(curl -Ls https://coverage.codacy.com/get.sh) report -r <coverage report file name>\n"})}),"\n",(0,a.jsx)(o.h2,{id:"checksum",children:"Can't validate checksum"}),"\n",(0,a.jsxs)(o.p,{children:["Starting on version ",(0,a.jsx)(o.a,{href:"https://github.com/codacy/codacy-coverage-reporter/releases/tag/13.0.0",children:"13.0.0"})," the ",(0,a.jsx)(o.code,{children:"get.sh"})," script automatically validates the checksum of the downloaded Codacy Coverage Reporter binary. This requires having either the ",(0,a.jsx)(o.code,{children:"sha512sum"})," or ",(0,a.jsx)(o.code,{children:"shasum"})," command on the operating system where you're running the script."]}),"\n",(0,a.jsxs)(o.p,{children:["If you're getting this error while uploading your coverage data to Codacy, install the correct version of ",(0,a.jsx)(o.code,{children:"sha512sum"})," or ",(0,a.jsx)(o.code,{children:"shasum"})," for the operating system that you're using."]}),"\n",(0,a.jsx)(o.p,{children:"You can also skip validating the checksum of the binary by defining the following environment variable, however, Codacy doesn't recommend this:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"export CODACY_REPORTER_SKIP_CHECKSUM=true\n"})}),"\n",(0,a.jsx)(o.h2,{id:"commit-detection",children:"Commit SHA-1 hash detection"}),"\n",(0,a.jsx)(o.p,{children:"The Codacy Coverage Reporter automatically detects the SHA-1 hash of the current commit to associate with the coverage data when you're using one of the following CI/CD platforms:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsx)("span",{class:"skip-vale",children:"Appveyor"}),"\n"]}),"\n",(0,a.jsx)(o.li,{children:"Argo CD"}),"\n",(0,a.jsx)(o.li,{children:"AWS CodeBuild"}),"\n",(0,a.jsx)(o.li,{children:"Azure Pipelines"}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsx)("span",{class:"skip-vale",children:"Bitrise"}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsx)("span",{class:"skip-vale",children:"Buildkite"}),"\n"]}),"\n",(0,a.jsx)(o.li,{children:"Circle CI"}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsx)("span",{class:"skip-vale",children:"Codefresh"}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsx)("span",{class:"skip-vale",children:"Codeship"}),"\n"]}),"\n",(0,a.jsx)(o.li,{children:"Docker"}),"\n",(0,a.jsx)(o.li,{children:"GitLab"}),"\n",(0,a.jsx)(o.li,{children:"Greenhouse CI"}),"\n",(0,a.jsx)(o.li,{children:"Heroku CI"}),"\n",(0,a.jsx)(o.li,{children:"Jenkins"}),"\n",(0,a.jsx)(o.li,{children:"Magnum CI"}),"\n",(0,a.jsx)(o.li,{children:"Semaphore CI"}),"\n",(0,a.jsx)(o.li,{children:"Shippable CI"}),"\n",(0,a.jsx)(o.li,{children:"Solano CI"}),"\n",(0,a.jsx)(o.li,{children:"TeamCity CI"}),"\n",(0,a.jsx)(o.li,{children:"Travis CI"}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsx)("span",{class:"skip-vale",children:"Wercker CI"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:"If the Codacy Coverage Reporter fails to detect the current commit from the CI workflow context, it will use the current commit from the local Git repository instead."}),"\n",(0,a.jsxs)(o.p,{children:["However, you can also force using a specific commit SHA-1 hash with the flag ",(0,a.jsx)(o.code,{children:"--commit-uuid"}),". For example:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"bash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    -r report.xml \\\n    --commit-uuid cd4d000083a744cf1617d46af4ec108b79e06bed\n"})}),"\n",(0,a.jsx)(o.h2,{id:"connect-timed-out-while-uploading-coverage-data",children:"Connect timed out while uploading coverage data"}),"\n",(0,a.jsxs)(o.p,{children:["If you get a ",(0,a.jsx)(o.code,{children:"Error doing a post to <...> connect timed out"})," error while uploading your coverage data to Codacy it means that the Codacy Coverage Reporter is timing out while connecting to the Codacy API. This typically happens if you're uploading coverage data for larger repositories."]}),"\n",(0,a.jsxs)(o.p,{children:["To increase the default timeout while connecting to the Codacy API, use the flag ",(0,a.jsx)(o.code,{children:"--http-timeout"})," to set a value larger than 10000 milliseconds. For example, to set the timeout to 30 seconds:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"bash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    -r report.xml \\\n    --http-timeout 30000\n"})}),"\n",(0,a.jsx)(o.h2,{id:"coverage-xmlindexxml-generated-an-empty-result",children:"coverage-xml/index.xml generated an empty result"}),"\n",(0,a.jsxs)(o.p,{children:["If you're using ",(0,a.jsx)("span",{class:"skip-vale",children:"PHPUnit"})," version 5 or above to generate your coverage report, you must output the report using the Clover format. Codacy Coverage Reporter supports the ",(0,a.jsx)("span",{class:"skip-vale",children:"PHPUnit"})," XML format only for versions 4 and older."]}),"\n",(0,a.jsxs)(o.p,{children:["To change the output format replace the flag ",(0,a.jsx)(o.code,{children:"--coverage-xml <dir>"})," with ",(0,a.jsx)(o.code,{children:"--coverage-clover <file>"})," when executing ",(0,a.jsx)("span",{class:"skip-vale",children:(0,a.jsx)(o.code,{children:"phpunit"})}),"."]}),"\n",(0,a.jsxs)(o.p,{children:["See ",(0,a.jsxs)(o.a,{href:"https://phpunit.readthedocs.io/en/11.0/textui.html",children:[(0,a.jsx)("span",{class:"skip-vale",children:"PHPUnit"})," command-line documentation"]})," for more information."]}),"\n",(0,a.jsx)(o.h2,{id:"jsonparseexception-while-uploading-coverage-data",children:"JsonParseException while uploading coverage data"}),"\n",(0,a.jsxs)(o.p,{children:["If you get a ",(0,a.jsx)(o.code,{children:"com.fasterxml.jackson.core.JsonParseException"})," error while uploading your coverage data to Codacy it means that your coverage report is too big and that Codacy Coverage Reporter hit a limit of 10 MB when uploading the coverage data to Codacy."]}),"\n",(0,a.jsx)(o.p,{children:"There are some ways you can solve this:"}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:["Split your coverage reports into smaller files and ",(0,a.jsx)(o.a,{href:"../uploading-coverage-in-advanced-scenarios/#multiple-reports",children:"upload them to Codacy one at a time"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(o.li,{children:["\n",(0,a.jsxs)(o.p,{children:[(0,a.jsx)(o.strong,{children:"If you're using dotCover to generate coverage reports for your C# projects"}),", you should ",(0,a.jsxs)(o.a,{href:"https://www.jetbrains.com/help/dotcover/Running_Coverage_Analysis_from_the_Command_LIne.html#filters_cmd",children:["exclude ",(0,a.jsx)("span",{class:"skip-vale",children:"xUnit"})," files"]})," from the coverage analysis as follows:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"dotCover.exe cover <...> /Filters=-:xunit*\n"})}),"\n",(0,a.jsxs)(o.p,{children:["By default, ",(0,a.jsx)("span",{class:"skip-vale",children:"dotCover"})," includes ",(0,a.jsx)("span",{class:"skip-vale",children:"xUnit"})," files in the coverage analysis and this results in larger coverage reports. This filter helps ensure that the resulting coverage data doesn't exceed the size limit accepted by the Codacy API when uploading the results."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(o.h2,{id:"malformedinputexception-while-parsing-report",children:"MalformedInputException while parsing report"}),"\n",(0,a.jsxs)(o.p,{children:["If you get a ",(0,a.jsx)(o.code,{children:"java.nio.charset.MalformedInputException"})," when running the Codacy Coverage Reporter it means that the coverage report includes a character that's not encoded in UTF-8. The invalid character can belong to the file name of one of your source code files, or even a class or method name."]}),"\n",(0,a.jsx)(o.p,{children:"For maximum compatibility of your coverage reports with the Codacy Coverage Reporter, make sure that your coverage reports use UTF-8 encoding and that they only include UTF-8 characters."}),"\n",(0,a.jsx)(o.h2,{id:"no-coverage-data-was-sent",children:"No coverage data was sent"}),"\n",(0,a.jsxs)(o.p,{children:["You can get the ",(0,a.jsx)(o.code,{children:"No coverage data was sent"})," error when running the Codacy Coverage Reporter for the following reasons:"]}),"\n",(0,a.jsxs)(o.ul,{children:["\n",(0,a.jsx)(o.li,{children:"The coverage report doesn't include any coverage data."}),"\n",(0,a.jsxs)(o.li,{children:["The coverage report only includes data for files that don't exist in the associated Git repository. In this case, you also get one or more warnings ",(0,a.jsx)(o.code,{children:"File: [filename] will be discarded and will not be considered for coverage calculation"}),"."]}),"\n"]}),"\n",(0,a.jsx)(o.p,{children:"Make sure that your coverage report isn't empty and that it includes coverage data for files in the associated Git repository."}),"\n",(0,a.jsx)(o.admonition,{type:"note",children:(0,a.jsx)(o.p,{children:"If you upload multiple coverage reports and at least one contains valid data, the Codacy Coverage Reporter uploads the valid reports and ignores the invalid ones."})}),"\n",(0,a.jsx)(o.h2,{id:"detailedxml",children:"Report generated an empty result while uploading C# coverage data"}),"\n",(0,a.jsxs)(o.p,{children:["If you're using ",(0,a.jsx)("span",{class:"skip-vale",children:"dotCover"})," to generate coverage reports for your C# projects, you must use the ",(0,a.jsx)("span",{class:"skip-vale",children:"dotCover"})," detailedXML report format as follows:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"dotCover.exe cover <...> --reportType=DetailedXml\n"})}),"\n",(0,a.jsx)(o.h2,{id:"substratesegfaulthandler-caught-signal-11",children:"SubstrateSegfaultHandler caught signal 11"}),"\n",(0,a.jsxs)(o.p,{children:["If you're experiencing segmentation faults when uploading the coverage results due to ",(0,a.jsx)(o.a,{href:"https://github.com/oracle/graal/issues/624",children:(0,a.jsx)("span",{class:"skip-vale",children:"oracle/graal#624"})}),", execute the following command before running the reporter, as a workaround:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-sh",children:'echo "$(dig +short api.codacy.com | tail -n1) api.codacy.com" >> /etc/hosts\n'})}),"\n",(0,a.jsx)(o.h2,{id:"i-received-the-message-invalid-configuration-either-a-project-or-account-api-token-must-be-provided-or-available-in-an-environment-variable-in-a-build-from-a-commit-created-by-dependabot-github",children:'I received the message: "Invalid configuration: Either a project or account API token must be provided or available in an environment variable" in a build from a commit created by Dependabot (Github)'}),"\n",(0,a.jsx)(o.p,{children:"When builds are triggered by Dependabot, they run with a read-only GITHUB_TOKEN and don\u2019t have access to any secrets stored in GitHub Actions. This can break workflows \u2014 for example, the token may be missing and coverage reports can\u2019t be uploaded to Codacy."}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.a,{href:"https://docs.github.com/en/code-security/dependabot/troubleshooting-dependabot/troubleshooting-dependabot-on-github-actions#troubleshooting-failures-when-dependabot-triggers-existing-workflows",children:"See GitHub\u2019s documentation for details."})}),"\n",(0,a.jsx)(o.p,{children:"If you still need to upload coverage from Dependabot\u2019s pull requests, a workaround is to add an empty commit to those PRs. Because the commit comes from a regular user account, the workflow will then have access to the repository\u2019s secrets, allowing the upload to succeed."})]})}function h(e={}){const{wrapper:o}={...(0,t.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);