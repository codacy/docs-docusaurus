"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[5685],{28453(e,n,s){s.d(n,{R:()=>r,x:()=>t});var i=s(96540);const l={},o=i.createContext(l);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(o.Provider,{value:n},e.children)}},81117(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"release-notes/self-hosted/v2.0.0-self-hosted","title":"Self-hosted v2.0.0","description":"Release notes for Codacy Self-hosted v2.0.0.","source":"@site/docs/release-notes/self-hosted/v2.0.0-self-hosted.md","sourceDirName":"release-notes/self-hosted","slug":"/release-notes/self-hosted/self-hosted-v2.0.0","permalink":"/docs-docusaurus/docs/release-notes/self-hosted/self-hosted-v2.0.0","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Self-hosted v2.0.0","rss_title":"Codacy release notes RSS feed","rss_href":"/feed_rss_created.xml","description":"Release notes for Codacy Self-hosted v2.0.0.","slug":"/release-notes/self-hosted/self-hosted-v2.0.0"},"sidebar":"releaseNotesSidebar","previous":{"title":"Self-hosted v2.1.0","permalink":"/docs-docusaurus/docs/release-notes/self-hosted/self-hosted-v2.1.0"},"next":{"title":"Self-hosted v1.5.0","permalink":"/docs-docusaurus/docs/release-notes/self-hosted/self-hosted-v1.5.0"}}');var l=s(74848),o=s(28453);const r={title:"Self-hosted v2.0.0",rss_title:"Codacy release notes RSS feed",rss_href:"/feed_rss_created.xml",description:"Release notes for Codacy Self-hosted v2.0.0.",slug:"/release-notes/self-hosted/self-hosted-v2.0.0"},t=void 0,a={},d=[{value:"Breaking changes",id:"breaking-changes",level:2},{value:"Product enhancements",id:"product-enhancements",level:2},{value:"Bug fixes",id:"bug-fixes",level:2},{value:"Tool versions",id:"tool-versions",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["These release notes are for ",(0,l.jsx)(n.a,{href:"https://github.com/codacy/chart/releases/tag/2.0.0",children:"Codacy Self-hosted v2.0.0"}),", released on August 18, 2020."]}),"\n",(0,l.jsxs)(n.p,{children:["To upgrade Codacy, follow ",(0,l.jsx)(n.a,{href:"../../chart/maintenance/upgrade.md",children:"these instructions"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"breaking-changes",children:"Breaking changes"}),"\n",(0,l.jsx)(n.p,{children:"This version of Codacy Self-hosted introduces the following breaking changes:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"You must manually delete the existing RabbitMQ PVCs before upgrading Codacy."}),"\n",(0,l.jsxs)(n.p,{children:["To do this, start by removing the RabbitMQ ",(0,l.jsx)("span",{class:"skip-vale",children:"statefulset"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl delete sts/codacy-rabbitmq-ha -n codacy\n"})}),"\n",(0,l.jsx)(n.p,{children:"Confirm the name of the PVCs that were created by RabbitMQ:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get pvc -n codacy\n"})}),"\n",(0,l.jsx)(n.p,{children:"Finally, delete all the PVCs related to RabbitMQ. You should have three replicas which was the default for versions older than 2.0.0:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl delete pvc data-codacy-rabbitmq-ha-0 -n codacy\nkubectl delete pvc data-codacy-rabbitmq-ha-1 -n codacy\nkubectl delete pvc data-codacy-rabbitmq-ha-2 -n codacy\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"caution",children:(0,l.jsxs)(n.p,{children:["After you upgrade Codacy, our chart will install a new version of RabbitMQ with the ",(0,l.jsx)(n.strong,{children:"new default of one replica"}),"."]})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["The structure of the file ",(0,l.jsx)(n.a,{href:"https://docs.codacy.com/v2.0/chart/values-files/values-production.yaml",children:(0,l.jsx)(n.code,{children:"values-production.yaml"})})," changed. You must update your version of the file to match the structure of the new file:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The following analysis workers configuration values moved from:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"worker-manager:\n  config:\n    workers:\n        [...]\n    workerResources:\n        [...]\n    pluginResources:\n        [...]\n"})}),"\n",(0,l.jsx)(n.p,{children:"To:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"global:\n  workerManager:\n    workers:\n      config:\n        [...]\n        workerResources:\n            [...]\n        pluginResources:\n            [...]\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The following database configuration values moved from:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"hotspots-api:\n  hotspotsdb:\n    [...]\n\nactivities:\n  activitiesdb:\n    [...]\n\ncrow:\n  crowdb:\n    [...]\n"})}),"\n",(0,l.jsx)(n.p,{children:"To:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"global:\n  hotspotsdb:\n    [...]\n  activitiesdb:\n    [...]\n  crowdb:\n    [...]\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"The following Erlang cookie configuration was added to the RabbitMQ configuration values:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"rabbitmq-ha:\n  rabbitmqErlangCookie:  <--- erlang-cookie ---\x3e  # Generate one with `cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 1`\n  [...]\n"})}),"\n",(0,l.jsxs)(n.p,{children:["When you previously installed Codacy, this cookie was automatically set to a random value. We recommend that you keep the same cookie to help ensure that the Codacy upgrade runs ",(0,l.jsx)("span",{class:"skip-vale",children:"smoothly"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"Run the following command to retrieve the current cookie value and define it explicitly in the new configuration:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'kubectl get secrets -n codacy codacy-rabbitmq-ha -o jsonpath="{.data.rabbitmq-erlang-cookie}" | base64 --decode\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"product-enhancements",children:"Product enhancements"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["The chart for Codacy Self-hosted now ",(0,l.jsx)(n.a,{href:"https://docs.codacy.com/v2.0/chart/#2-installing-codacy",children:"supports Helm 3.3"}),"."]}),"\n",(0,l.jsx)(n.li,{children:"Updated the RabbitMQ chart to version 7.5.7 from the Bitnami Helm chart repository."}),"\n",(0,l.jsx)(n.li,{children:"Updated the MinIO chart to version 5.0.33 from the stable Helm chart repository."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"bug-fixes",children:"Bug fixes"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Now, Codacy provides feedback if the Country field is empty while updating the invoice details for an organization. (CY-2600)"}),"\n",(0,l.jsx)(n.li,{children:"Fixed an issue that prevented users from finishing the onboarding process unless they added a Git provider organization. (CY-2580)"}),"\n",(0,l.jsx)(n.li,{children:"Fixed an issue that prevented Codacy from loading the organization data from the Git provider during the onboarding process. (CY-2572)"}),"\n",(0,l.jsx)(n.li,{children:"Fixed an issue that prevented Codacy from sending commit and pull request notification emails to members of an organization. (CY-2467)"}),"\n",(0,l.jsx)(n.li,{children:"Fixed an issue that could cause Codacy to display an HTTP 404 error page instead of the Repositories page for an organization. (CY-2356)"}),"\n",(0,l.jsx)(n.li,{children:"Fixed an issue that could cause Codacy to stop syncing Bitbucket Cloud repositories and updating pull requests in those repositories. (CY-2355)"}),"\n",(0,l.jsx)(n.li,{children:"Fixed an issue that could prevent new users from starting the onboarding wizard. (CY-2288)"}),"\n",(0,l.jsx)(n.li,{children:"Now, Codacy automatically navigates to the Organizations page after deleting an organization. (CY-2278)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"tool-versions",children:"Tool versions"}),"\n",(0,l.jsx)(n.p,{children:"This version of Codacy Self-hosted includes the tool versions below. The tools that were updated on this version are highlighted in bold:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Ameba: 0.13.1 (updated from 0.12.0)"})}),"\n",(0,l.jsx)(n.li,{children:"Bandit: 1.6.2"}),"\n",(0,l.jsx)(n.li,{children:"Brakeman: 4.3.1"}),"\n",(0,l.jsx)(n.li,{children:"bundler-audit: 0.6.1"}),"\n",(0,l.jsx)(n.li,{children:"Checkstyle: 8.34"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"CodeNarc: 1.6 (updated from 1.5)"})}),"\n",(0,l.jsx)(n.li,{children:"CoffeeLint: 2.1.0"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Cppcheck: 2.1 (updated from 1.90)"})}),"\n",(0,l.jsx)(n.li,{children:"Credo: 1.3.0"}),"\n",(0,l.jsx)(n.li,{children:"CSSLint: 1.0.5"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"detekt: 1.10.0 (updated from 1.8.0)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"ESLint: 7.6.0 (updated from 6.8.0)"})}),"\n",(0,l.jsx)(n.li,{children:"Flawfinder: 2.0.11"}),"\n",(0,l.jsx)(n.li,{children:"Gorevive: 1.0.2"}),"\n",(0,l.jsx)(n.li,{children:"Gosec: v2.3.0"}),"\n",(0,l.jsx)(n.li,{children:"Hadolint: 1.17.5"}),"\n",(0,l.jsx)(n.li,{children:"Jackson Linter: 2.10.2"}),"\n",(0,l.jsx)(n.li,{children:"JSHint: 2.10.2"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"PHP_CodeSniffer: 3.5.6 (updated from 3.5.5)"})}),"\n",(0,l.jsx)(n.li,{children:"Phpmd: 2.8.1"}),"\n",(0,l.jsx)(n.li,{children:"PMD (Legacy): 5.8.1"}),"\n",(0,l.jsx)(n.li,{children:"PMD: 6.25.0"}),"\n",(0,l.jsx)(n.li,{children:"Prospector: 1.2.0"}),"\n",(0,l.jsx)(n.li,{children:"PSScriptAnalyser: 1.18.3"}),"\n",(0,l.jsx)(n.li,{children:"Pylint Python3: 2.5.3"}),"\n",(0,l.jsx)(n.li,{children:"Pylint: 1.9.5"}),"\n",(0,l.jsx)(n.li,{children:"Remark Lint: 7.0.0"}),"\n",(0,l.jsx)(n.li,{children:"RuboCop: 0.82.0"}),"\n",(0,l.jsx)(n.li,{children:"Scalastyle: 1.0.0"}),"\n",(0,l.jsx)(n.li,{children:"ShellCheck: v0.7.0"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"SonarC#: 8.10 (updated from 8.9)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"SonarVB: 8.10 (updated from 8.9)"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"SpotBugs: 4.0.1 (updated from 4.0.0)"})}),"\n",(0,l.jsx)(n.li,{children:"SQLint: 0.1.9"}),"\n",(0,l.jsx)(n.li,{children:"Staticcheck: 2017.2.2"}),"\n",(0,l.jsx)(n.li,{children:"Stylelint: 13.6.1"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"SwiftLint: 0.39.2 (updated from 0.36.0)"})}),"\n",(0,l.jsx)(n.li,{children:"Tailor: 0.12.0"}),"\n",(0,l.jsx)(n.li,{children:"TSLint: 5.14.0"}),"\n",(0,l.jsx)(n.li,{children:"TSQLLint: 1.11.1"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);