"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[7054],{1491(e,o,n){n.r(o),n.d(o,{assets:()=>u,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"repositories-configure/local-analysis/running-spotbugs","title":"Running SpotBugs","description":"Instructions on how to run SpotBugs as a client-side tool on Codacy.","source":"@site/docs/repositories-configure/local-analysis/running-spotbugs.mdx","sourceDirName":"repositories-configure/local-analysis","slug":"/repositories-configure/local-analysis/running-spotbugs","permalink":"/docs-docusaurus/repositories-configure/local-analysis/running-spotbugs","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Running SpotBugs","description":"Instructions on how to run SpotBugs as a client-side tool on Codacy.","tool_name":"SpotBugs"},"sidebar":"documentationSidebar","previous":{"title":"Running deadcode","permalink":"/docs-docusaurus/repositories-configure/local-analysis/running-deadcode"},"next":{"title":"Running ESLint","permalink":"/docs-docusaurus/repositories-configure/local-analysis/running-eslint"}}');var t=n(74848),r=n(28453),i=n(56932),a=n(4961);const c={title:"Running SpotBugs",description:"Instructions on how to run SpotBugs as a client-side tool on Codacy.",tool_name:"SpotBugs"},l=void 0,u={},d=[...a.RM,{value:"Detecting sources and compiled classes",id:"detecting-sources-and-compiled-classes",level:2},{value:"Increasing the timeout to run SpotBugs",id:"increasing-the-timeout-to-run-spotbugs",level:2},...i.RM];function h(e){const o={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.p,{children:["To run SpotBugs as a ",(0,t.jsx)(o.a,{href:"/docs-docusaurus/repositories-configure/local-analysis/client-side-tools",children:"client-side tool"}),":"]}),"\n",(0,t.jsxs)("ol",{children:[(0,t.jsx)(a.Ay,{toolName:"SpotBugs"}),(0,t.jsx)("li",{children:"Compile your Java or Scala repository on your build server, as you would normally do."}),(0,t.jsxs)("li",{children:[(0,t.jsxs)(o.p,{children:["Download and run the"," "]}),(0,t.jsx)("a",{href:"https://github.com/codacy/codacy-analysis-cli#install",children:(0,t.jsx)(o.p,{children:"Codacy Analysis CLI"})})," ",(0,t.jsx)(o.p,{children:"on the root of the repository, specifying the tool SpotBugs."}),(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"codacy-analysis-cli analyze --tool spotbugs \\\n                            --allow-network \\\n                            --upload \\\n                            --verbose\n"})}),(0,t.jsx)("p",{children:(0,t.jsxs)(o.p,{children:[(0,t.jsx)("strong",{children:"If you're using an account API token"}),", you must also\nprovide the flags ",(0,t.jsx)("code",{children:"--provider"}),", ",(0,t.jsx)("code",{children:"--username"}),",\nand ",(0,t.jsx)("code",{children:"--project"}),". You can obtain the values for these\nflags from the URL of your repository dashboard on Codacy:"]})}),(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"codacy-analysis-cli analyze --provider <gh, ghe, gl, gle, bb, or bbe> \\\n                            --username <name of your Codacy organization> \\\n                            --project <name of your repository> \\\n                            --tool spotbugs \\\n                            --allow-network \\\n                            --upload \\\n                            --verbose\n"})})]})]}),"\n",(0,t.jsx)(o.p,{children:"The Codacy Analysis CLI runs SpotBugs on the compiled classes of your repository and uploads the results to Codacy so you can use them in your workflow."}),"\n",(0,t.jsx)(o.h2,{id:"detecting-sources-and-compiled-classes",children:"Detecting sources and compiled classes"}),"\n",(0,t.jsx)(o.p,{children:"The Codacy Analysis CLI tries to find the compiled classes and map results to the source files automatically. If you use Maven, Gradle, or sbt the Codacy Analysis CLI also detects the default layouts automatically."}),"\n",(0,t.jsxs)(o.p,{children:["If there is an issue with detection, you can configure these paths manually by adding a ",(0,t.jsx)(o.code,{children:".codacy.yml"})," ",(0,t.jsx)(o.a,{href:"../codacy-configuration-file.md",children:"Codacy configuration file"})," to the root of the repository:"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-yml",children:'---\nengines:\n  spotbugs:\n    modules:\n      - classesDirectories: [ "core/target/classes" ]\n        sourceDirectories:  [ "core/src/main" ]\n      - classesDirectories: [ "api/target/classes" ]\n        sourceDirectories:  [ "api/src/main" ]\n'})}),"\n",(0,t.jsx)(o.h2,{id:"increasing-the-timeout-to-run-spotbugs",children:"Increasing the timeout to run SpotBugs"}),"\n",(0,t.jsxs)(o.p,{children:["When running SpotBugs on the compiled classes of larger projects, the ",(0,t.jsx)(o.a,{href:"https://github.com/codacy/codacy-analysis-cli#commands-and-configuration",children:"default execution timeout of 15 minutes"})," may not be enough for SpotBugs to complete the analysis."]}),"\n",(0,t.jsxs)(o.p,{children:["To increase the timeout that SpotBugs has to execute, use the option ",(0,t.jsx)(o.code,{children:"--tool-timeout"})," when running the Codacy Analysis CLI. For example, use ",(0,t.jsx)(o.code,{children:"--tool-timeout 1hour"})," to set the timeout to one hour."]}),"\n",(0,t.jsx)(i.Ay,{toolName:"SpotBugs"})]})}function p(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},4961(e,o,n){n.d(o,{Ay:()=>c,RM:()=>i});var s=n(74848),t=n(81779);const r=function({toolName:e}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("li",{children:[(0,s.jsxs)("a",{href:"/repositories-configure/configuring-code-patterns/",children:["Enable ",e]})," ","and configure the corresponding code patterns on your repository"," ",(0,s.jsx)("strong",{children:"Code patterns"})," page."]}),(0,s.jsxs)("li",{children:["Enable ",(0,s.jsx)("strong",{children:"Run analysis on your build server"})," on your repository ",(0,s.jsx)("strong",{children:"Settings"}),", tab ",(0,s.jsx)("strong",{children:"General"}),","," ",(0,s.jsx)("strong",{children:"Repository analysis on your server"}),".",(0,s.jsx)("p",{children:"This setting enables Codacy to wait for the results of the local analysis before resuming the analysis of your commits."}),(0,s.jsx)("p",{children:(0,s.jsx)("img",{src:"./images/run-analysis-through-build-server.png",alt:"Run analysis on your build server"})})]}),(0,s.jsxs)("li",{children:["Set up an API token to authenticate on Codacy:",(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"If you're setting up one repository"}),","," ",(0,s.jsx)("a",{href:"/codacy-api/api-tokens#repository-api-tokens",children:"obtain a repository API token"})," ","and set the following environment variable to specify your repository API token:",(0,s.jsx)("pre",{children:(0,s.jsx)("code",{className:"language-bash",children:"export CODACY_PROJECT_TOKEN=<your repository API token>"})})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"If you're setting up multiple repositories"}),","," ",(0,s.jsx)("a",{href:"/codacy-api/api-tokens#account-api-tokens",children:"obtain an account API Token"})," ","and set the following environment variable to specify the account API token:",(0,s.jsx)("pre",{children:(0,s.jsx)("code",{className:"language-bash",children:"export CODACY_API_TOKEN=<your account API token>"})})]})]}),(0,s.jsx)(t.Ay,{})]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"If you're using Codacy Self-hosted"})," set the following environment variable to specify your Codacy instance URL:",(0,s.jsx)("pre",{children:(0,s.jsx)("code",{className:"language-bash",children:"export CODACY_API_BASE_URL=<your Codacy instance URL>"})})]})]})},i=[];function a(e){return(0,s.jsx)(s.Fragment,{})}function c(e={}){return(0,s.jsx)(r,{...e,children:(0,s.jsx)(a,{...e})})}},28453(e,o,n){n.d(o,{R:()=>i,x:()=>a});var s=n(96540);const t={},r=s.createContext(t);function i(e){const o=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(r.Provider,{value:o},e.children)}},56932(e,o,n){n.d(o,{Ay:()=>a,RM:()=>r});var s=n(74848);const t=function({toolName:e}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Advanced configuration"}),(0,s.jsxs)("p",{children:["See the available"," ",(0,s.jsx)("a",{href:"https://github.com/codacy/codacy-analysis-cli#configuration",children:"Codacy Analysis CLI configuration flags"})," ","to configure running ",e," in more advanced scenarios."]})]})},r=[];function i(e){return(0,s.jsx)(s.Fragment,{})}function a(e={}){return(0,s.jsx)(t,{...e,children:(0,s.jsx)(i,{...e})})}},81779(e,o,n){n.d(o,{Ay:()=>a,RM:()=>r});var s=n(74848),t=n(28453);const r=[];function i(e){const o={admonition:"admonition",p:"p",strong:"strong",...(0,t.R)(),...e.components};return(0,s.jsxs)(o.admonition,{type:"caution",children:[(0,s.jsxs)(o.p,{children:[(0,s.jsx)(o.strong,{children:"Never write API tokens to your configuration files"})," and keep your API tokens well protected, as they grant owner permissions to your projects on Codacy."]}),(0,s.jsx)(o.p,{children:"It's a best practice to store API tokens as environment variables. Check the documentation of your CI/CD platform on how to do this."})]})}function a(e={}){const{wrapper:o}={...(0,t.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}}}]);