"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[2233],{4961(n,e,o){o.d(e,{Ay:()=>c,RM:()=>s});var r=o(74848),a=o(81779);const t=function({toolName:n}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("li",{children:[(0,r.jsxs)("a",{href:"/repositories-configure/configuring-code-patterns/",children:["Enable ",n]})," ","and configure the corresponding code patterns on your repository"," ",(0,r.jsx)("strong",{children:"Code patterns"})," page."]}),(0,r.jsxs)("li",{children:["Enable ",(0,r.jsx)("strong",{children:"Run analysis on your build server"})," on your repository ",(0,r.jsx)("strong",{children:"Settings"}),", tab ",(0,r.jsx)("strong",{children:"General"}),","," ",(0,r.jsx)("strong",{children:"Repository analysis on your server"}),".",(0,r.jsx)("p",{children:"This setting enables Codacy to wait for the results of the local analysis before resuming the analysis of your commits."}),(0,r.jsx)("p",{children:(0,r.jsx)("img",{src:"./images/run-analysis-through-build-server.png",alt:"Run analysis on your build server"})})]}),(0,r.jsxs)("li",{children:["Set up an API token to authenticate on Codacy:",(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"If you're setting up one repository"}),","," ",(0,r.jsx)("a",{href:"/codacy-api/api-tokens#repository-api-tokens",children:"obtain a repository API token"})," ","and set the following environment variable to specify your repository API token:",(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"export CODACY_PROJECT_TOKEN=<your repository API token>"})})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"If you're setting up multiple repositories"}),","," ",(0,r.jsx)("a",{href:"/codacy-api/api-tokens#account-api-tokens",children:"obtain an account API Token"})," ","and set the following environment variable to specify the account API token:",(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"export CODACY_API_TOKEN=<your account API token>"})})]})]}),(0,r.jsx)(a.Ay,{})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"If you're using Codacy Self-hosted"})," set the following environment variable to specify your Codacy instance URL:",(0,r.jsx)("pre",{children:(0,r.jsx)("code",{className:"language-bash",children:"export CODACY_API_BASE_URL=<your Codacy instance URL>"})})]})]})},s=[];function i(n){return(0,r.jsx)(r.Fragment,{})}function c(n={}){return(0,r.jsx)(t,{...n,children:(0,r.jsx)(i,{...n})})}},28453(n,e,o){o.d(e,{R:()=>s,x:()=>i});var r=o(96540);const a={},t=r.createContext(a);function s(n){const e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),r.createElement(t.Provider,{value:e},n.children)}},70817(n,e,o){o.r(e),o.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"repositories-configure/local-analysis/running-dartanalyzer","title":"Running Dart Analyzer","description":"Instructions on how to run Dart Analyzer as a client-side tool on Codacy.","source":"@site/docs/repositories-configure/local-analysis/running-dartanalyzer.mdx","sourceDirName":"repositories-configure/local-analysis","slug":"/repositories-configure/local-analysis/running-dartanalyzer","permalink":"/docs-docusaurus/repositories-configure/local-analysis/running-dartanalyzer","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Running Dart Analyzer","description":"Instructions on how to run Dart Analyzer as a client-side tool on Codacy.","tool_name":"Dart Analyzer"},"sidebar":"documentationSidebar","previous":{"title":"Running aligncheck","permalink":"/docs-docusaurus/repositories-configure/local-analysis/running-aligncheck"},"next":{"title":"Running deadcode","permalink":"/docs-docusaurus/repositories-configure/local-analysis/running-deadcode"}}');var a=o(74848),t=o(28453),s=o(4961);const i={title:"Running Dart Analyzer",description:"Instructions on how to run Dart Analyzer as a client-side tool on Codacy.",tool_name:"Dart Analyzer"},c=void 0,l={},d=[...s.RM,{value:"Important Concepts",id:"important-concepts",level:2},{value:"Manual configuration",id:"manual-configuration",level:2},{value:"GitHub Action",id:"github-action",level:2},{value:"Using a project token",id:"using-a-project-token",level:3},{value:"Using an account API token",id:"using-an-account-api-token",level:3}];function u(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:["To run Dart Analyzer as a ",(0,a.jsx)(e.a,{href:"/docs-docusaurus/repositories-configure/local-analysis/client-side-tools",children:"client-side tool"}),":"]}),"\n",(0,a.jsx)("ol",{children:(0,a.jsx)(s.Ay,{toolName:"Dart Analyzer"})}),"\n",(0,a.jsx)(e.h2,{id:"important-concepts",children:"Important Concepts"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:(0,a.jsx)(e.code,{children:".codacy/codacy.yaml"})}),": Configuration file to specify ",(0,a.jsx)(e.code,{children:"dart"}),", or ",(0,a.jsx)(e.code,{children:"flutter"}),", and ",(0,a.jsx)(e.code,{children:"dartanalyzer"})," versions for the CLI."]}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:"runtimes:\n    - dart@3.7.2\ntools:\n    - dartanalyzer@3.7.20\n"})}),"\n",(0,a.jsx)(e.p,{children:"or"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:"runtimes:\n    - flutter@3.29.3\ntools:\n    - dartanalyzer@3.7.20\n"})}),"\n",(0,a.jsx)(e.h2,{id:"manual-configuration",children:"Manual configuration"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"codacy-cli install\ncodacy-cli analyze -t dartanalyzer -o dartanalyzer.sarif\ncodacy-cli upload -s dartanalyzer.sarif -c $COMMIT_SHA -t CODACY_PROJECT_TOKEN\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"If you're using an account API token"}),", you must also provide the flags ",(0,a.jsx)(e.code,{children:"-p"}),", ",(0,a.jsx)(e.code,{children:"-o"}),", and ",(0,a.jsx)(e.code,{children:"-r"}),". You can obtain the values for these flags from the URL of your repository dashboard on Codacy:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"codacy-cli install\ncodacy-cli analyze -t dartanalyzer -o dartanalyzer.sarif\ncodacy-cli analyze -t dartanalyzer -o dartanalyzer.sarif -c $COMMIT_SHA -a CODACY_API_TOKEN -p provider (gh|gl|bb) -o ORGANIZATION -r REPOSITORY\n"})}),"\n",(0,a.jsx)(e.h2,{id:"github-action",children:"GitHub Action"}),"\n",(0,a.jsx)(e.h3,{id:"using-a-project-token",children:"Using a project token"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yml",children:"- name: Run Codacy CLI\n  uses: codacy/codacy-cli-v2-action@main\n  with:\n    project-token: CODACY_PROJECT_TOKEN\n    tool: dartanalyzer\n    upload_report: true\n"})}),"\n",(0,a.jsx)(e.h3,{id:"using-an-account-api-token",children:"Using an account API token"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yml",children:"- name: Run Codacy CLI\n  uses: codacy/codacy-cli-v2-action@main\n  with:\n    api_token: CODACY_API_TOKEN\n    tool: dartanalyzer\n    upload_report: true\n    provider: gh\n    owner: codacy-acme\n    repository: sample-dart-project\n"})}),"\n",(0,a.jsx)(e.admonition,{title:"Tokens should be stored in the repository secrets.",type:"caution"})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(u,{...n})}):u(n)}},81779(n,e,o){o.d(e,{Ay:()=>i,RM:()=>t});var r=o(74848),a=o(28453);const t=[];function s(n){const e={admonition:"admonition",p:"p",strong:"strong",...(0,a.R)(),...n.components};return(0,r.jsxs)(e.admonition,{type:"caution",children:[(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Never write API tokens to your configuration files"})," and keep your API tokens well protected, as they grant owner permissions to your projects on Codacy."]}),(0,r.jsx)(e.p,{children:"It's a best practice to store API tokens as environment variables. Check the documentation of your CI/CD platform on how to do this."})]})}function i(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(s,{...n})}):s(n)}}}]);