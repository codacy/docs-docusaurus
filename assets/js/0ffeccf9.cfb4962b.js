"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[8823],{28453(e,n,o){o.d(n,{R:()=>d,x:()=>s});var a=o(96540);const i={},t=a.createContext(i);function d(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),a.createElement(t.Provider,{value:n},e.children)}},92921(e,n,o){o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>d,metadata:()=>a,toc:()=>r});const a=JSON.parse('{"id":"codacy-api/examples/adding-people-to-codacy-programmatically","title":"Adding people to Codacy programmatically","description":"Example of how to add people programmatically using Codacy\'s API v3 endpoint addPeopleToOrganization.","source":"@site/docs/codacy-api/examples/adding-people-to-codacy-programmatically.mdx","sourceDirName":"codacy-api/examples","slug":"/codacy-api/examples/adding-people-to-codacy-programmatically","permalink":"/docs-docusaurus/docs/codacy-api/examples/adding-people-to-codacy-programmatically","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Adding people to Codacy programmatically","description":"Example of how to add people programmatically using Codacy\'s API v3 endpoint addPeopleToOrganization."},"sidebar":"documentationSidebar","previous":{"title":"Creating repository API tokens programmatically","permalink":"/docs-docusaurus/docs/codacy-api/examples/creating-repository-api-tokens-programmatically"},"next":{"title":"Adding repositories to Codacy programmatically","permalink":"/docs-docusaurus/docs/codacy-api/examples/adding-repositories-to-codacy-programmatically"}}');var i=o(74848),t=o(28453);const d={title:"Adding people to Codacy programmatically",description:"Example of how to add people programmatically using Codacy's API v3 endpoint addPeopleToOrganization."},s=void 0,l={},r=[{value:"Example: Adding people from a file containing emails",id:"example-adding-people-from-a-file-containing-emails",level:2},{value:"See also",id:"see-also",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"There are scenarios where manually adding people on the Codacy UI is inconvenient or time-consuming. For example, you're adding many people to Codacy, such as when initially onboarding all developers within a team."}),"\n",(0,i.jsxs)(n.p,{children:["To add people programmatically, use the Codacy API endpoint ",(0,i.jsx)(n.a,{href:"https://app.codacy.com/api/api-docs#addpeopletoorganization",children:"addPeopleToOrganization"})," by performing an HTTP POST request to ",(0,i.jsx)(n.code,{children:"/people"}),", specifying a list of email addresses in the body of the request:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -X POST https://app.codacy.com/api/v3/organizations/<GIT_PROVIDER>/<ORGANIZATION>/people \\\n  -H 'Content-Type: application/json' \\\n  -H 'api-token: <API_KEY>' \\\n  -d '[\"<EMAIL#1>\", \"<EMAIL#2>\"]'\n"})}),"\n",(0,i.jsx)(n.p,{children:"Substitute the placeholders with your own values:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"API_KEY:"})," ",(0,i.jsx)(n.a,{href:"../api-tokens.md#account-api-tokens",children:"Account API token"})," used to authenticate on the Codacy API."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GIT_PROVIDER:"})," Git provider hosting of the organization, using one of the values in the table below. For example, ",(0,i.jsx)(n.code,{children:"gh"})," for GitHub Cloud."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Git provider"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gh"})}),(0,i.jsx)(n.td,{children:"GitHub Cloud"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ghe"})}),(0,i.jsx)(n.td,{children:"GitHub Enterprise"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gl"})}),(0,i.jsx)(n.td,{children:"GitLab Cloud"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gle"})}),(0,i.jsx)(n.td,{children:"GitLab Enterprise"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bb"})}),(0,i.jsx)(n.td,{children:"Bitbucket Cloud"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bbe"})}),(0,i.jsx)(n.td,{children:"Bitbucket Server"})]})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"ORGANIZATION:"})," Name of the organization on the Git provider. For example, ",(0,i.jsx)(n.code,{children:"codacy"}),". You must have admin permissions over the organization on the Git provider."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"EMAIL#1...N:"})," Email addresses of the people to be added. For example, ",(0,i.jsx)(n.code,{children:"no-reply@codacy.com"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-adding-people-from-a-file-containing-emails",children:"Example: Adding people from a file containing emails"}),"\n",(0,i.jsx)(n.p,{children:"We provide an example Bash script that adds all emails in a text file to Codacy. We suggest that you adapt the script to your specific scenario."}),"\n",(0,i.jsx)(n.p,{children:"The example script:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Defines the ",(0,i.jsx)(n.a,{href:"../api-tokens.md#account-api-tokens",children:"account API token"})," used to authenticate on the Codacy API."]}),"\n",(0,i.jsx)(n.li,{children:"Defines the path and filename of the file containing the email addresses list."}),"\n",(0,i.jsxs)(n.li,{children:["Uses ",(0,i.jsx)(n.code,{children:"awk"})," and ",(0,i.jsx)(n.code,{children:"sed"})," to read the email addresses list from a file."]}),"\n",(0,i.jsxs)(n.li,{children:["Calls the endpoint ",(0,i.jsx)(n.a,{href:"https://app.codacy.com/api/api-docs#addpeopletoorganization",children:"addPeopleToOrganization"})," to add a list of email addresses to Codacy."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'CODACY_API_TOKEN="<your account API token>"\nGIT_PROVIDER="<your Git provider>" # gh, ghe, gl, gle, bb, or bbe\nORGANIZATION="<your organization name>"\nFILENAME="emails.txt"\n\nEMAILS=`awk -vORS=, \'{if(length($1)>0) printf("\\"%s\\",", $1)}\' $FILENAME | sed \'s/,$//\'`\n\ncurl -X POST "https://app.codacy.com/api/v3/organizations/$GIT_PROVIDER/$ORGANIZATION/people" \\\n     -H \'Content-Type: application/json\' \\\n     -H "api-token: $CODACY_API_TOKEN" \\\n     -d "[$EMAILS]"\n'})}),"\n",(0,i.jsx)(n.p,{children:"Expected format of the file containing the email addresses list:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"$ cat emails.txt\nemail1@codacy.com\nemail2@codacy.com\nemail3@codacy.com\nemail4@codacy.com\n"})}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/organizations/managing-people/#adding-people",children:"Adding people to your organization"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);