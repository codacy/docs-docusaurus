"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[3584],{28453(e,o,r){r.d(o,{R:()=>t,x:()=>c});var a=r(96540);const n={},s=a.createContext(n);function t(e){const o=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),a.createElement(s.Provider,{value:o},e.children)}},92420(e,o,r){r.r(o),r.d(o,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>t,metadata:()=>a,toc:()=>i});const a=JSON.parse('{"id":"coverage-reporter/uploading-coverage-in-advanced-scenarios","title":"Uploading coverage in advanced scenarios","description":"Instructions on how to use the Codacy Coverage Reporter to upload coverage data in advanced scenarios such as when running parallel tests, using monorepos, or testing source code in multiple or unsupported languages.","source":"@site/docs/coverage-reporter/uploading-coverage-in-advanced-scenarios.md","sourceDirName":"coverage-reporter","slug":"/coverage-reporter/uploading-coverage-in-advanced-scenarios","permalink":"/docs-docusaurus/docs/coverage-reporter/uploading-coverage-in-advanced-scenarios","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Uploading coverage in advanced scenarios","description":"Instructions on how to use the Codacy Coverage Reporter to upload coverage data in advanced scenarios such as when running parallel tests, using monorepos, or testing source code in multiple or unsupported languages."},"sidebar":"documentationSidebar","previous":{"title":"Alternative ways of running Coverage Reporter","permalink":"/docs-docusaurus/docs/coverage-reporter/alternative-ways-of-running-coverage-reporter"},"next":{"title":"Troubleshooting coverage CLI issues","permalink":"/docs-docusaurus/docs/coverage-reporter/troubleshooting-coverage-cli-issues"}}');var n=r(74848),s=r(28453);const t={title:"Uploading coverage in advanced scenarios",description:"Instructions on how to use the Codacy Coverage Reporter to upload coverage data in advanced scenarios such as when running parallel tests, using monorepos, or testing source code in multiple or unsupported languages."},c=void 0,l={},i=[{value:"Uploading multiple coverage reports for the same language",id:"multiple-reports",level:2},{value:"Uploading all reports at once",id:"multiple-reports-once",level:3},{value:"Uploading reports in sequence",id:"multiple-reports-sequence",level:3},{value:"Uploading the same coverage report for multiple languages",id:"multiple-languages",level:2},{value:"Uploading coverage for Golang",id:"golang",level:2},{value:"Uploading coverage for unsupported languages",id:"unsupported-languages",level:2}];function p(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.p,{children:"The following sections include instructions on how to use the Codacy Coverage Reporter to upload coverage data in more advanced scenarios."}),"\n",(0,n.jsx)(o.h2,{id:"multiple-reports",children:"Uploading multiple coverage reports for the same language"}),"\n",(0,n.jsx)(o.p,{children:"If your test suite is split into different modules or runs in parallel, you must upload multiple coverage reports for the same language either at once or in sequence."}),"\n",(0,n.jsxs)(o.p,{children:["Alternatively, consider merging multiple coverage reports before uploading them to Codacy. Most coverage tools support merging or aggregating coverage data. For example, use the ",(0,n.jsx)(o.a,{href:"http://www.eclemma.org/jacoco/trunk/doc/merge-mojo.html",children:"merge mojo for JaCoCo"}),"."]}),"\n",(0,n.jsx)(o.admonition,{type:"note",children:(0,n.jsx)(o.p,{children:"If one or more coverage reports mark a line as covered multiple times, Codacy counts it as a single covered line when calculating coverage."})}),"\n",(0,n.jsx)(o.h3,{id:"multiple-reports-once",children:"Uploading all reports at once"}),"\n",(0,n.jsxs)(o.p,{children:["Upload multiple partial coverage reports with a single command by specifying each report with the flag ",(0,n.jsx)(o.code,{children:"-r"}),". For example:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"bash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    -l Java -r report1.xml -r report2.xml -r report3.xml\n"})}),"\n",(0,n.jsxs)(o.p,{children:["You can also upload all your reports dynamically using the command ",(0,n.jsx)(o.code,{children:"find"}),". For example:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"bash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    -l Java $(find . -name 'jacoco*.xml' | sed 's,^, -r ,' | xargs echo)\n"})}),"\n",(0,n.jsx)(o.h3,{id:"multiple-reports-sequence",children:"Uploading reports in sequence"}),"\n",(0,n.jsx)(o.p,{children:"Upload multiple partial coverage reports in sequence:"}),"\n",(0,n.jsxs)(o.ol,{children:["\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsxs)(o.p,{children:["Upload each report ",(0,n.jsx)("span",{class:"skip-vale",children:"separately"})," with the flag ",(0,n.jsx)(o.code,{children:"--partial"}),"."]}),"\n",(0,n.jsxs)(o.p,{children:["If you're sending reports for a language with the flag ",(0,n.jsx)(o.code,{children:"--partial"}),", you must use the flag in all reports for that language to ensure the correct calculation of the coverage."]}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:["\n",(0,n.jsxs)(o.p,{children:["Notify Codacy with the ",(0,n.jsx)(o.code,{children:"final"})," command after uploading all reports."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(o.p,{children:"For example:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"bash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    --partial -l Java -r report1.xml\nbash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    --partial -l Java -r report2.xml\nbash <(curl -Ls https://coverage.codacy.com/get.sh) final\n"})}),"\n",(0,n.jsx)(o.h2,{id:"multiple-languages",children:"Uploading the same coverage report for multiple languages"}),"\n",(0,n.jsx)(o.p,{children:"If your test suite generates a single coverage report for more than one language, you must upload the same coverage report for each language."}),"\n",(0,n.jsxs)(o.p,{children:["To do this, upload the same report multiple times, specifying each different language with the flag ",(0,n.jsx)(o.code,{children:"-l"}),". For example:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"bash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    --partial -l Javascript -r report.xml\nbash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    --partial -l TypeScript -r report.xml\nbash <(curl -Ls https://coverage.codacy.com/get.sh) final\n"})}),"\n",(0,n.jsx)(o.h2,{id:"golang",children:"Uploading coverage for Golang"}),"\n",(0,n.jsx)(o.p,{children:"Codacy can't automatically detect Golang coverage report files because they don't have specific file names."}),"\n",(0,n.jsx)(o.p,{children:"If you're uploading a Golang coverage report, you must also specify the report type:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"go test -coverprofile=unit.coverage.out ./...\nbash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n    --force-coverage-parser go -r unit.coverage.out\n"})}),"\n",(0,n.jsx)(o.h2,{id:"unsupported-languages",children:"Uploading coverage for unsupported languages"}),"\n",(0,n.jsxs)(o.p,{children:["If your language isn't in the ",(0,n.jsx)(o.a,{href:"/docs-docusaurus/docs/coverage-reporter/#generating-coverage",children:"list of supported languages"}),", you can still send coverage to Codacy."]}),"\n",(0,n.jsxs)(o.p,{children:["To do this, provide the correct language with the flag ",(0,n.jsx)(o.code,{children:"-l"}),", together with ",(0,n.jsx)(o.code,{children:"--force-language"}),". For example:"]}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"bash <(curl -Ls https://coverage.codacy.com/get.sh) report \\\n  -l Kotlin --force-language -r <coverage report file name>\n"})}),"\n",(0,n.jsxs)(o.p,{children:["See the ",(0,n.jsx)(o.a,{href:"https://github.com/codacy/codacy-plugins-api/blob/master/codacy-plugins-api/src/main/scala/com/codacy/plugins/api/languages/Language.scala#L41",children:"list of languages"})," that you can specify using the flag ",(0,n.jsx)(o.code,{children:"-l"}),"."]})]})}function d(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}}}]);